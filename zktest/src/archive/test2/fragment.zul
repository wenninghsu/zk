<?xml version="1.0" encoding="UTF-8"?>

<!--
fragment.zul

	Purpose:
		
	Description:
		
	History:
		Fri Sep 30 17:34:01 CST 2016, Created by wenninghsu

Copyright (C) 2016 Potix Corporation. All Rights Reserved.

-->
<nodom viewModel="@id('vm') @init('org.zkoss.zktest.test2.FragmentVM')">
	<div style="border:1px solid grey; margin:5px; padding:5px;">
		fragment component
		<fragment id="fg" cus="@bind(vm.customer)" stu="@bind(vm.students)" btn1="@bind(vm.btn1)"><![CDATA[
			<if test="@load(cus)">
				<div style="border:1px solid grey; margin:5px; padding:5px;">
					<span textContent="@load(cus.name)"/>
					<input value="@bind(cus.age)"/>
				</div>
			</if>
			<div style="border:1px solid grey; margin:5px; padding:5px;">
				<ul>
					<forEach items="@load(stu)" var="student">
						<li>
							<span textContent="@load(student.name)"></span>
							<span textContent="@load(student.age)"/>
							<input value="@bind(student.score)" onChange="@command('clickBtn')"></input>
						</li>
					</forEach>
				</ul>
			</div>
			<div>
				<button onClick="@command('clickBtn1')" textContent="@load(btn1)"/>
				<button onClick="@command('clickBtn2')">btn2</button>
				<button onClick="console.log('btn click')">btn3</button>
			</div>
		]]></fragment>
	</div>
	<button onClick="fg.invalidate()" label="fragment invalidate"/>
	<button onClick="@command('clickBtn')" label="command"/>
	<button label="tb setContent">
		<attribute name="onClick"><![CDATA[
			String s = "<span textContent=\"@load(cus.name)\"/><button onClick=\"@command('clickBtn')\">click btn</button><button onClick=\"@command('clickBtn1')\" style=\"\">click btn1</button>";
			fg.setContent(s);
		]]></attribute>
	</button>
	<button label="tb setContent back">
		<attribute name="onClick"><![CDATA[
			String s = "<if test=\"@load(cus)\"><div style=\"border:1px solid grey; margin:5px; padding:5px;\"><span textContent=\"@load(cus.name)\"/><input value=\"@bind(cus.age)\"/></div></if><div style=\"border:1px solid grey; margin:5px; padding:5px;\"><ul><forEach items=\"@load(stu)\" var=\"student\"><li><span textContent=\"@load(student.name)\"></span><span textContent=\"@load(student.age)\"/><input value=\"@bind(student.score)\" onChange=\"@command('clickBtn')\"></input></li></forEach></ul></div><div><button onClick=\"@command('clickBtn1')\" textContent=\"@load(btn1)\"/><button onClick=\"@command('clickBtn2')\">btn2</button><button onClick=\"console.log('btn click')\">btn3</button></di";
			fg.setContent(s);
		]]></attribute>
	</button>
	<textbox value="@bind(vm.tbValue)" onChange="@command('tbOnChange')"/>
</nodom>